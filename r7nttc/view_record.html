<script>
    // Fetch data from data.json
    async function fetchTrainersData() {
        const response = await fetch('data.json');
        if (!response.ok) {
            throw new Error('Failed to fetch data.json');
        }
        return await response.json();
    }

    // Display the list of trainer names
    function displayNameList(trainersData) {
        const nameList = document.getElementById('nameList');
        nameList.innerHTML = '';
        trainersData.forEach((trainer) => {
            const li = document.createElement('li');
            li.textContent = `${trainer.last_name}, ${trainer.first_name}`;
            li.onclick = () => {
                // Update the URL with the trainer's ID
                const params = new URLSearchParams(window.location.search);
                params.set('id', trainer.id);
                window.location.search = params.toString();
            };
            nameList.appendChild(li);
        });
    }

    // Display the trainer's profile based on their ID
    function displayProfile(trainer) {
        const profileDetails = document.getElementById('profileDetails');
        profileDetails.style.display = 'block';
        profileDetails.innerHTML = `
            <h2>${trainer.first_name} ${trainer.last_name}</h2>
            <div class="section">
                <div class="section-title">Personal Information</div>
                <div class="info-grid">
                    <div class="info-item"><strong>Last Name:</strong> ${trainer.last_name}</div>
                    <div class="info-item"><strong>First Name:</strong> ${trainer.first_name}</div>
                    <div class="info-item"><strong>Middle Initial:</strong> ${trainer.middle_initial}</div>
                    <div class="info-item"><strong>Extension:</strong> ${trainer.extension}</div>
                    <div class="info-item"><strong>Birthday:</strong> ${trainer.birthday}</div>
                    <div class="info-item"><strong>Sex:</strong> ${trainer.sex}</div>
                    <div class="info-item"><strong>Address:</strong> ${trainer.address}</div>
                    <div class="info-item"><strong>Training Institution:</strong> ${trainer.training_institution}</div>
                    <div class="info-item"><strong>Type of Training Institution:</strong> ${trainer.type_training_institution}</div>
                    <div class="info-item"><strong>Contact Number:</strong> ${trainer.contact_number}</div>
                    <div class="info-item"><strong>Educational Attainment:</strong> ${trainer.educational_attainment}</div>
                    <div class="info-item"><strong>Training Hours:</strong> ${trainer.training_hours}</div>
                    <div class="info-item"><strong>Years of Experience:</strong> ${trainer.years_of_experience}</div>
                    <div class="info-item"><strong>Sector:</strong> ${trainer.sector}</div>
                    <div class="info-item"><strong>Qualification:</strong> ${trainer.qualification}</div>
                    <div class="info-item"><strong>NC Cert Number:</strong> ${trainer.nc_cert_number}</div>
                    <div class="info-item"><strong>NC Date Issuance:</strong> ${trainer.nc_date_issuance}</div>
                    <div class="info-item"><strong>NC Validity:</strong> ${trainer.nc_validity}</div>
                    <div class="info-item"><strong>TM Cert Number:</strong> ${trainer.tm_cert_number}</div>
                    <div class="info-item"><strong>TM Date Issuance:</strong> ${trainer.tm_date_issuance}</div>
                    <div class="info-item"><strong>TM Validity:</strong> ${trainer.tm_validity}</div>
                    <div class="info-item"><strong>Assessor 1:</strong> ${trainer.assessor1}</div>
                    <div class="info-item"><strong>Assessor 2:</strong> ${trainer.assessor2}</div>
                    <div class="info-item"><strong>Assessor 3:</strong> ${trainer.assessor3}</div>
                    <div class="info-item"><strong>NTTC Serial Number:</strong> ${trainer.nttc_serial_number}</div>
                    <div class="info-item"><strong>NTTC Cert Number:</strong> ${trainer.nttc_cert_number}</div>
                    <div class="info-item"><strong>NTTC Date Issuance:</strong> ${trainer.nttc_date_issuance}</div>
                    <div class="info-item"><strong>NTTC Validity:</strong> ${trainer.nttc_validity}</div>
                </div>
            </div>
            <!-- Add more sections here as required -->
        `;
    }

    // Initialize the page
    async function initialize() {
        try {
            const trainersData = await fetchTrainersData();

            // Display the list of names
            displayNameList(trainersData);

            // Check for ID in the URL and display the corresponding profile
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            if (id) {
                const trainer = trainersData.find((t) => t.id === id);
                if (trainer) {
                    displayProfile(trainer);
                } else {
                    alert('Trainer not found.');
                }
            }
        } catch (error) {
            console.error(error.message);
        }
    }

    // Run the initialize function
    initialize();
</script>
